# test-monorepo-release-drafter

release-drafterによるバージョン管理、リリースフローをイメージするための実験リポジトリ

## 確認したいこと

### ドラフト状態のリリースがあるときにマージが増えるとどうなるか？

- ドラフトがある状態で PR がマージされると、すでに存在しているドラフト状態のリリースにまとめられる。
- patch リリースがある状態で patch バージョンアップの PR をマージすると、既存のドラフトに変更 PR が追加される。
- すでにあるドラフトと異なるバージョンアップの PR がマージされたら、より強い方が作成されまとめられる。

### autolabeler の付与ルールは AND か OR か？

- マッチャー内のリストは AND
- マッチャーごとは OR

### どのアプリの include-paths にも含まれないファイルへの変更はどうなるか？

- リリースノートに載らない
- アプリケーション本体に関係ない変更が多いので除外で良いか決め
- デプロイ用スクリプトの変更など、問題が出た時に差分として気づきたい情報はありそうだが
- セキュリティアップデートで yarn.lock に変更が出るが、yarn.lock を監視してしまうと別アプリの変更も入るので対象にするのは無理そう

## つまずきポイント

- release-drafter.yml が main にないと Actions がコケるので、main に先に入れて workflow を書かないとマージできずにスタックする。
- autolabeler で付与される予定のラベルは事前に用意しておく。
- workflow の push はリリースドラフトのトリガーなので必要。
- autolabeler の付与ルールはマッチャーごとは OR だが、マッチャー内のリストは AND 条件。
